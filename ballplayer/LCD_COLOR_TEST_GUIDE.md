# LCD颜色对比度测试指南

## 🎯 测试目标

这个测试模式专门用于验证LCD能否正确显示不同颜色，解决您遇到的"白屏无游戏内容"问题。

## 🔧 当前配置

项目已临时切换到测试模式：
- **顶层模块**: `ballplayer_top_test.v`
- **LCD模块**: `lcd_contrast_test.v`
- **功能**: 显示红绿蓝黑四色条纹图案

## 📱 预期显示效果

LCD应该显示四个水平条纹：
1. **上部1/4屏幕**: 红色条纹
2. **第2个1/4屏幕**: 绿色条纹  
3. **第3个1/4屏幕**: 蓝色条纹
4. **下部1/4屏幕**: 黑色条纹

## 🔍 LED状态指示

### 测试模式LED含义：
- **LED0**: 填充状态指示（应该亮起表示正在绘制）
- **LED1**: 初始化完成指示（应该亮起）
- **LED2**: 未使用（暗）
- **LED3**: 按键1状态（按下时亮）
- **LED4**: 游戏模式切换指示（持续按键1三秒后亮）
- **LED5-6**: 未使用（暗）
- **LED7**: 系统状态（正常时亮）

## 🎮 测试步骤

### 第一步：编译测试
```
1. 在Quartus Prime中打开ballplayer.qpf
2. 确认顶层实体为：ballplayer_top_test
3. 执行完整编译
4. 下载到FPGA
```

### 第二步：观察显示
1. **如果看到四色条纹**：
   - ✅ LCD硬件工作正常
   - ✅ SPI通信正常
   - ✅ 颜色显示功能正常
   - ➡️ 问题在于原游戏代码的图案数据

2. **如果仍然是白屏**：
   - ❌ LCD初始化或SPI通信有问题
   - ❌ 引脚配置可能有误
   - ❌ 硬件连接问题

3. **如果显示其他异常**：
   - ⚠️ 记录具体现象，用于进一步诊断

## 🔄 恢复游戏模式

测试完成后，恢复原始游戏模式：

### 方法1：自动切换（推荐）
```
持续按住KEY1（上键）3秒钟
系统会自动切换到游戏模式（LED4亮起表示切换成功）
```

### 方法2：手动切换
```
1. 编辑ballplayer.qsf文件
2. 将顶层实体改回：ballplayer_top
3. 重新编译和下载
```

## 📊 问题诊断

### 情况A：四色条纹正常显示
**说明**: LCD硬件完全正常，问题在软件层面

**下一步行动**：
1. 恢复游戏模式
2. 修复pic_ram.v中的图案数据
3. 调整颜色对比度设置

### 情况B：仍然白屏
**说明**: LCD初始化或连接有问题

**检查项目**：
1. 验证引脚连接：LCD_RST(P15), LCD_DC(R14), LCD_SCLK(R11), LCD_MOSI(P12), LCD_CS(R9)
2. 检查电源和背光连接
3. 验证SPI时序

### 情况C：显示异常颜色
**说明**: 数据传输有问题

**可能原因**：
1. SPI时钟频率过高
2. 数据位序错误
3. RGB颜色格式问题

## 💡 预期结果

基于您之前的反馈（LCD显示白色而不是深蓝色），LCD硬件应该是正常的。这个测试应该能显示四色条纹，确认问题确实在于游戏图案数据的设置。

## 🛠️ 技术细节

### 颜色编码（16位RGB565格式）：
- **红色**: 0xF800 (11111 000000 00000)
- **绿色**: 0x07E0 (00000 111111 00000)  
- **蓝色**: 0x001F (00000 000000 11111)
- **黑色**: 0x0000 (00000 000000 00000)

### 像素数据传输：
- 每个像素16位，分两次8位传输
- 先传输高8位，再传输低8位
- 总像素数：240×320 = 76,800像素

**请按照上述步骤测试，并告诉我LCD显示的具体效果！** 🚀

# ballplayer项目测试指南
**更新时间**: 2025年5月28日

## 🚀 快速测试步骤

### 1. 编译项目
1. 打开Quartus Prime
2. 打开项目文件 `ballplayer.qpf`
3. 执行编译: **Processing → Start Compilation**
4. 等待编译完成，检查是否有错误

### 2. 下载到FPGA
1. 连接MAX10开发板
2. **Tools → Programmer**
3. 添加 `output_files/ballplayer.sof` 文件
4. 点击 **Start** 下载

## 🔍 预期测试结果

### LED状态指示验证
根据您之前的描述，请检查以下LED状态：

| LED编号 | 功能 | 预期状态 | 之前状态 | 修复后预期 |
|---------|------|----------|----------|------------|
| LED0 | LCD工作状态 | 🔄工作时亮 | ? | 应该亮 |
| LED1 | LCD初始化完成 | ✅常亮 | 不亮❌ | 应该亮✅ |
| LED2 | 传感器数据有效 | 🔄每0.8s闪烁 | 不亮❌ | 应该闪烁✅ |
| LED3 | 手势检测 | 🔄根据模拟数据变化 | 开始时亮 | 应该变化 |
| LED4 | ADC采样完成 | 🔄定期闪烁 | 开始时亮 | 应该闪烁 |
| LED5 | 游戏结束标志 | ⚪一般不亮 | 开始时亮 | 应该不亮 |
| LED6 | 游戏停止标志 | ⚪一般不亮 | 按键时亮 | 正常 |
| LED7 | 系统复位状态 | ✅常亮 | 开始时亮 | 应该常亮 |

### LCD显示验证
- **修复前**: 深蓝色无内容，长按按键1时变深蓝色
- **修复后预期**: 
  - 正常时显示白色背景
  - 应该能看到球的运动轨迹
  - 应该能看到手的位置线
  - 不应该再出现深蓝色

### 数码管显示验证
- **修复前**: 第一个数码管3段亮，第二个2段亮
- **修复后预期**: 应该显示参数值（弹性系数k），按KEY1/KEY2可调节

## 🔧 问题排查

### 如果LED1仍然不亮
```
问题：LCD初始化可能未完成
解决：检查lcd_init模块的复位逻辑
```

### 如果LED2仍然不亮
```
问题：简化传感器驱动未工作
解决：检查rpr0521rs_driver_simple.v是否正确编译
```

### 如果LCD仍显示深蓝色
```
问题：LCD模块连接问题
解决：
1. 检查lcd.v模块的时钟连接
2. 验证LCD SPI引脚连接
3. 检查lcd_init模块
```

### 如果LED3-6状态异常
```
问题：游戏逻辑问题
解决：检查jumping模块和hand_control模块
```

## 📊 传感器模拟数据说明

由于使用了简化的传感器驱动，当前的传感器行为是模拟的：
- **每0.8秒更新一次数据**
- **模拟接近数据在30-100之间变化**
- **LED3应该根据接近值>50的条件变化**

这样可以验证游戏逻辑是否正常，而不受I2C通信问题影响。

## 📝 测试记录模板

请按以下格式记录测试结果：

```
【编译结果】
□ 编译成功 □ 有警告 □ 有错误
错误信息：_______________

【LED状态】
LED0: □亮 □不亮 □闪烁
LED1: □亮 □不亮 □闪烁  
LED2: □亮 □不亮 □闪烁
LED3: □亮 □不亮 □闪烁
LED4: □亮 □不亮 □闪烁
LED5: □亮 □不亮 □闪烁
LED6: □亮 □不亮 □闪烁
LED7: □亮 □不亮 □闪烁

【LCD显示】
□白色背景 □深蓝色 □其他颜色
□有球运动 □无图案 □有异常图案

【按键测试】
KEY1(J9): □有响应 □无响应
KEY2(K14): □有响应 □无响应  
KEY3(J11): □有响应 □无响应

【数码管显示】
第一个: □正常数字 □异常段 □不亮
第二个: □正常数字 □异常段 □不亮
```

如果测试结果与预期不符，请提供具体的观察结果，我可以进一步分析和修复。
